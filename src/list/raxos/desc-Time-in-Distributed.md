## 虚拟时间在分布式的意义


在后面对分布式的讨论中, 我们抛弃常识上的 wall clock, 所涉及到的时间概念都替换成上面定义的虚拟时间的概念.

这是因为: 现实世界中我们无法让一个事件在不同的位置上**同时**发生(即使这里不考虑相对论造成的时空问题). 例如我不能要求在服务器A和服务器B上**同时**进行一个`read(ABC)`的操作, 这最终导致了我们基于时间的理论都无法直接在分布式环境中使用了. 

> 试想一下便知, 如果能强制某个操作在多个服务器上**同时**执行, 那么paxos这些算法就没有必要出现了, 分布式领域中面对的所有问题, 最终都会归结为一个事件**无法(在多个位置)同时执行**这个原因. Prove me wrong (.

虽然在分布式环境中使用wall clock, 也可以建立一个定序的框架, [Time, Clocks and the Ordering of Events in a Distributed System][], 但直接重新定义分布式环境中的时间, 可以让问题更加简单直接, 这也是后续的 [Paxos made simple][] 成功的原因.

回顾分布式领域发展的几个关键的事件:

- 尝试用wall clock在分布式环境中定序: [Time, Clocks and the Ordering of Events in a Distributed System][]
- 引入逻辑定义的时间来解决分布式中无法**同时**发生的问题: [Paxos Made Simple][], 它找到了正确的方向, 因此是最重要的一篇, 但还没有深入使用这个工具来解决工程上的问题.
- 将逻辑时间真正扩展为一个工业可用的, 线性的时间定义: [Raft][], 对绝大部分分布式一致性问题给出了标准答案.
- 试图将逻辑时间从线性扩展到多维度的: [CRDT][], [Generalized Consensus and Paxos][], [CURP][], 等在不同方向进行了尝试, 其中的核心思想都是将业务上无需定序的2个操作视为不同时间维度上的操作, 例如 `let x = 2` 和 `let y = 3` 就是在2个不同维度上的操作, 不需要定义他们两个之间的顺序.
- 本文的目标是完全脱离线性时间的限制, 直接在更抽象的层面定义时间, 并将看到它引出更有趣的结论.