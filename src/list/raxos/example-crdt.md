example-crdt

# 多维偏序时间应用例子

假设有一个 key value 的存储系统，在这个系统里面，每个 key 都代表一个不同的维度。然后我们的时间，就是一个多维的向量时间内的比较，就是多为向量的比较。

我们先从一个简单的场景来看, 假设这个系统里只有2个key:
x 和 y,
这个系统的虚拟时间`T`定义为: 一个操作涉及的key的对应的维度上值为i的向量.
例如, `let x = 2` 的T为`{x:i}`,
`let y = 3`的T为`{y:i}`;
`let x = x + y`的T为`{x:i, y:i}`

显然这个虚拟时间的定义是符合我们的要求的 首先它是有大小的 可以描述成一个DAG的形式 并且它是没有没有环的
但是我们注意到它其实是不满足传递性的. 
其中T的比较关系定义为公共分量的大小比较:
例如, `{x:1} < {x:2,y:2} < {y:3}`, 但`{x:1}` `{y:2}` 之间没有大小关系, 因为它们没有公共分量. 所以它不满足传递性.

这个虚拟时间定义了哪些Event可以互补影响的执行, 哪些之间必须有确定的顺序, 以及这些顺序是什么(由`i` 定义).